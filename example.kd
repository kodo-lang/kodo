import "std/syscall.kd";

type File = struct {
    fd: i32;
};

fn File::open(let path: *u8): File {
    // 65 = `O_WRONLY | O_CREAT`.
    // 438 dec = 666 octal.
    let fd = open(path, 65, 438);
    return File{fd};
}

fn File::write(let file: *File, let str: *u8) {
    write(file->fd, str, 13);
}

fn main(): i32 {
    let file = File::open("Hello");
    File::write(&file, "Hello, world!");
    return 0;
}
