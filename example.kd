import "std/syscall.kd";

type File = struct {
    fd: i32;
};

fn File::open(let path: *u8): File {
    // 101 = `O_WRONLY | O_CREAT`.
    // 438 dec = 666 octal.
    let fd = open(path, 101, 438);
    var file: File;
    file.fd = fd;
    return file;
}

fn main(): i32 {
    let file = File::open("Hello");
    write(file.fd, "Hello, world!", 13);
    return 0;
}
